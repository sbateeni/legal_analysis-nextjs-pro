# منصة التحليل القانوني الذكي

منصة متقدمة للتحليل القانوني باستخدام الذكاء الاصطناعي، مصممة خصيصاً للنظام القانوني الفلسطيني.

## 🚀 الميزات الرئيسية

- **تحليل قانوني متقدم**: 12 مرحلة تحليل متسلسلة ومتراكمة
- **مساعد قانوني ذكي**: محادثة تفاعلية مع AI
- **تحليلات وإحصائيات**: إحصائيات مفصلة عن القضايا والاستخدام
- **تطبيق ويب تقدمي (PWA)**: يمكن تثبيته كتطبيق على الهاتف
- **واجهة متجاوبة**: تعمل بشكل مثالي على جميع الأجهزة
- **حماية الخصوصية**: جميع البيانات محفوظة محلياً

## 📁 بنية المشروع

```
legal_analysis-nextjs-pro/
├── frontend/                 # التطبيق الرئيسي
│   ├── pages/               # صفحات Next.js
│   │   ├── index.tsx        # الصفحة الرئيسية
│   │   ├── chat.tsx         # المساعد القانوني
│   │   ├── analytics.tsx    # التحليلات والإحصائيات
│   │   ├── history.tsx      # سجل القضايا
│   │   ├── about.tsx        # صفحة المعلومات
│   │   ├── privacy.tsx      # سياسة الخصوصية
│   │   └── api/            # نقاط النهاية API
│   ├── components/          # مكونات React
│   ├── utils/              # الأدوات المساعدة
│   ├── types/              # تعريفات TypeScript
│   ├── stages/             # ملفات المراحل القانونية
│   ├── public/             # الملفات العامة (PWA)
│   └── styles/             # ملفات CSS
├── pages/                   # صفحات إضافية (مجلد رئيسي)
├── components/              # مكونات إضافية
├── contexts/                # سياقات React
├── utils/                   # أدوات مساعدة إضافية
├── types/                   # أنواع TypeScript إضافية
├── styles/                  # أنماط إضافية
├── next.config.js           # إعدادات Next.js
├── vercel.json              # إعدادات النشر على Vercel
├── tsconfig.json            # إعدادات TypeScript
└── package.json             # تبعيات المشروع
```

## 🛠️ التقنيات المستخدمة

- **Next.js 15**: إطار العمل الرئيسي
- **React 18**: مكتبة واجهة المستخدم
- **TypeScript**: لكتابة كود آمن ومنظم
- **Google Gemini AI**: للتحليل القانوني
- **IndexedDB**: لتخزين البيانات محلياً
- **PWA**: لتجربة تطبيق محلي

## ⚡ التثبيت والتشغيل

### المتطلبات
- Node.js 18+ 
- مفتاح Gemini API من Google AI Studio

### خطوات التثبيت

1. **استنساخ المشروع:**
```bash
git clone <repository-url>
cd legal_analysis-nextjs-pro
```

2. **تثبيت التبعيات:**
```bash
npm install
```

3. **إعداد متغيرات البيئة:**
```bash
# إنشاء ملف .env.local
echo "GOOGLE_API_KEY=your_gemini_api_key_here" > .env.local
echo "NEXT_PUBLIC_ENCRYPTION_SECRET=your_secret_key_here" >> .env.local
```

4. **تشغيل التطبيق:**
```bash
npm run dev
```

5. **فتح المتصفح:**
```
http://localhost:3000
```

## 🔑 الحصول على مفتاح Gemini API

1. اذهب إلى [Google AI Studio](https://makersuite.google.com/app/apikey)
2. أنشئ حساب جديد أو سجل دخول
3. أنشئ مفتاح API جديد
4. انسخ المفتاح وأضفه إلى ملف `.env.local`

## 📱 استخدام التطبيق

### 1. إدخال البيانات
- أدخل مفتاح Gemini API
- اكتب اسم القضية
- أدخل تفاصيل القضية

### 2. التحليل القانوني
- انتقل إلى تبويب "مراحل التحليل"
- ابدأ بالمرحلة الأولى
- تابع المراحل بالترتيب

### 3. المساعد القانوني
- انتقل إلى صفحة المساعد
- اطرح أسئلتك القانونية
- احصل على إجابات ذكية

### 4. التحليلات
- راجع الإحصائيات
- تابع تقدم القضايا
- احصل على رؤى مفصلة

## 🚀 النشر على Vercel

### الحلول المطبقة لمشكلة 404:

1. ✅ إزالة مسار `@/*` غير الصحيح من `tsconfig.json`
2. ✅ تنظيف مجلد `pages` من الملفات غير الضربورية
3. ✅ إنشاء ملف `_document.tsx`
4. ✅ تحويل `next.config.ts` إلى `next.config.js`
5. ✅ تحديث `vercel.json` مع إعدادات `rewrites`
6. ✅ إنشاء `.vercelignore`
7. ✅ تحسين سكريبت البناء

### خطوات النشر:

1. **تأكد من تحديث الكود:**
```bash
git add .
git commit -m "Fix 404 error - complete solution"
git push origin main
```

2. **في Vercel Dashboard:**
   - اذهب إلى مشروعك
   - اضغط على "Settings" → "General"
   - تأكد من أن "Framework Preset" هو "Next.js"
   - اضغط على "Redeploy"

3. **إعدادات البناء المطلوبة:**
   - Build Command: `npm run build`
   - Install Command: `npm ci`
   - Output Directory: `.next`
   - Root Directory: `./` (أو اتركه فارغاً)

### إعداد متغيرات البيئة في Vercel:
- `GOOGLE_API_KEY`: مفتاح Gemini API
- `NEXT_PUBLIC_ENCRYPTION_SECRET`: مفتاح التشفير
- `NODE_ENV`: `production`

### إذا استمرت مشكلة 404:

#### الحل 1: إعادة تعيين المشروع
1. احذف المشروع من Vercel
2. أعد ربطه مع Git
3. تأكد من اختيار "Next.js" كـ Framework

#### الحل 2: استخدام ملف بديل
```bash
mv vercel-alt.json vercel.json
git add .
git commit -m "Try alternative vercel config"
git push origin main
```

#### الحل 3: فحص سجلات البناء
1. في Vercel Dashboard، اذهب إلى "Deployments"
2. اضغط على آخر deployment
3. تحقق من "Build Logs" و "Function Logs"

## 🔒 الأمان والخصوصية

- ✅ جميع البيانات محفوظة محلياً على جهازك
- ✅ لا يتم إرسال أي بيانات إلى خوادم خارجية
- ✅ تشفير متقدم للبيانات الحساسة
- ✅ حماية من هجمات XSS و SQL Injection

## 📄 المراحل القانونية

1. **تحديد المشكلة القانونية**
2. **جمع المعلومات والوثائق**
3. **تحليل النصوص القانونية**
4. **تحديد القواعد القانونية المنطبقة**
5. **تحليل السوابق القضائية**
6. **تحليل الفقه القانوني**
7. **تحليل الظروف الواقعية**
8. **تحديد الحلول القانونية الممكنة**
9. **تقييم الحلول القانونية**
10. **اختيار الحل الأمثل**
11. **صياغة الحل القانوني**
12. **تقديم التوصيات**
13. **العريضة القانونية النهائية**

## 🛠️ استكشاف الأخطاء

### مشاكل شائعة وحلولها:

1. **خطأ 404 في Vercel:**
   - راجع ملف `DEPLOYMENT.md`
   - تأكد من إعدادات `vercel.json`
   - تحقق من `next.config.js`

2. **مشاكل البناء:**
   ```bash
   # تنظيف وإعادة بناء
   rm -rf .next node_modules
   npm install
   npm run build
   ```

3. **مشاكل TypeScript:**
   - تأكد من `tsconfig.json`
   - تحقق من إصدارات التبعيات

### أوامر مفيدة للاختبار:

```bash
# اختبار البناء محلياً
npm run build

# اختبار التشغيل
npm run start

# تنظيف وإعادة بناء
rm -rf .next && npm run build

# فحص التبعيات
npm audit
npm outdated
```

## 🤝 المساهمة

نرحب بالمساهمات! يرجى:
1. Fork المشروع
2. إنشاء فرع للميزة الجديدة
3. إجراء التغييرات
4. إرسال Pull Request

## 📞 الدعم

للدعم الفني أو الاستفسارات:
- افتح Issue في GitHub
- راجع ملف `DEPLOYMENT.md`
- تحقق من إعدادات البيئة
- راجع سجلات البناء في Vercel

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT.

---

**ملاحظة**: هذا التطبيق مصمم خصيصاً للنظام القانوني الفلسطيني ويجب استخدامه كأداة مساعدة وليس كبديل للاستشارة القانونية المهنية.

**ملاحظة مهمة**: تم تطبيق حلول شاملة لمشكلة 404 في Vercel. راجع ملف `DEPLOYMENT.md` للحصول على تفاصيل كاملة. 