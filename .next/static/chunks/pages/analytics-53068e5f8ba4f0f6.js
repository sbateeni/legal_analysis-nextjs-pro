(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{149:(e,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>o});var t=i(7876),d=i(4232),n=i(1965),s=i(9799);function o(){let{theme:e}=(0,s.D)(),[r,i]=(0,d.useState)(null),[o,l]=(0,d.useState)(!0),[a,c]=(0,d.useState)("");(0,d.useEffect)(()=>{m()},[]);let m=async()=>{try{l(!0);let e=await fetch("/api/analytics"),r=await e.json();if(!e.ok)throw Error(r.message||"حدث خطأ في جلب البيانات");i(r)}catch(e){c(e instanceof Error?e.message:"حدث خطأ غير متوقع")}finally{l(!1)}},g=e=>{let[r,i]=e.split("-");return"".concat(["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"][parseInt(i)-1]," ").concat(r)};return(0,t.jsxs)("div",{style:{minHeight:"100vh",background:e.background,color:e.text,fontFamily:"Tajawal, Arial, sans-serif"},children:[(0,t.jsxs)("header",{style:{background:e.accent2,color:"white",padding:(0,n.Fr)()?"1rem":"1.5rem",textAlign:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,t.jsx)("h1",{style:{margin:0,fontSize:(0,n.Fr)()?"1.5rem":"2rem",fontWeight:"bold"},children:"\uD83D\uDCCA التحليلات والإحصائيات"}),(0,t.jsx)("p",{style:{margin:"0.5rem 0 0 0",opacity:.9,fontSize:(0,n.Fr)()?"0.9rem":"1rem"},children:"نظرة شاملة على جميع القضايا والتحليلات"})]}),(0,t.jsxs)("main",{style:{maxWidth:1200,margin:"0 auto",padding:(0,n.Fr)()?"1rem":"2rem"},children:[o&&(0,t.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:[(0,t.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"⏳"}),(0,t.jsx)("h3",{children:"جاري تحليل البيانات..."})]}),a&&(0,t.jsxs)("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",borderRadius:"0.5rem",marginBottom:"1rem"},children:["❌ ",a]}),r&&0===r.totalCases&&r.note&&(0,t.jsxs)("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"0.75rem",padding:"1.5rem",textAlign:"center",marginBottom:"1.5rem"},children:[(0,t.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\uD83D\uDCCA"}),(0,t.jsx)("h3",{style:{color:"#92400e",marginBottom:"1rem"},children:"لا توجد بيانات للتحليل حالياً"}),(0,t.jsx)("p",{style:{color:"#92400e",marginBottom:"1rem"},children:r.note}),(0,t.jsx)("div",{style:{background:"#fbbf24",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",display:"inline-block",fontWeight:"bold"},children:"\uD83D\uDCA1 نصيحة: أنشئ قضية جديدة من الصفحة الرئيسية لرؤية التحليلات"})]}),r&&r.totalCases>0&&(0,t.jsxs)("div",{style:{display:"grid",gap:"1.5rem"},children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:(0,n.Fr)()?"1fr":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,t.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"\uD83D\uDCCB"}),(0,t.jsx)("h3",{style:{margin:"0 0 0.5rem 0",color:"#1f2937"},children:"إجمالي القضايا"}),(0,t.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:e.accent2},children:r.totalCases})]}),(0,t.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"\uD83D\uDCC8"}),(0,t.jsx)("h3",{style:{margin:"0 0 0.5rem 0",color:"#1f2937"},children:"معدل النجاح"}),(0,t.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10b981"},children:[r.successRate,"%"]})]}),(0,t.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"\uD83C\uDFAF"}),(0,t.jsx)("h3",{style:{margin:"0 0 0.5rem 0",color:"#1f2937"},children:"متوسط الإنجاز"}),(0,t.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#f59e0b"},children:[r.averageStagesCompleted,"%"]})]}),(0,t.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"\uD83D\uDCDD"}),(0,t.jsx)("h3",{style:{margin:"0 0 0.5rem 0",color:"#1f2937"},children:"متوسط الطول"}),(0,t.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:e.accent},children:[r.averageCaseLength," كلمة"]})]})]}),(0,t.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,t.jsx)("h2",{style:{margin:"0 0 1rem 0",color:"#1f2937"},children:"أنواع القضايا"}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:(0,n.Fr)()?"1fr":"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:Object.entries(r.casesByType).map(r=>{let[i,d]=r;return(0,t.jsxs)("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.5rem",textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:i}),(0,t.jsx)("div",{style:{fontSize:"1.5rem",color:e.accent2,fontWeight:"bold"},children:d})]},i)})})]}),(0,t.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,t.jsx)("h2",{style:{margin:"0 0 1rem 0",color:"#1f2937"},children:"النشاط الأخير"}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:(0,n.Fr)()?"1fr":"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:r.recentActivity.map(r=>{let{date:i,count:d}=r;return(0,t.jsxs)("div",{style:{padding:"0.75rem",background:d>0?"#e0e7ff":"#f3f4f6",borderRadius:"0.5rem",textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontSize:"0.9rem",color:"#6b7280",marginBottom:"0.25rem"},children:g(i)}),(0,t.jsx)("div",{style:{fontSize:"1.25rem",fontWeight:"bold",color:d>0?e.accent2:"#9ca3af"},children:d})]},i)})})]}),(0,t.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,t.jsx)("h2",{style:{margin:"0 0 1rem 0",color:"#1f2937"},children:"المراحل الأكثر استخداماً"}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.topStages.map(r=>{let{stage:i,count:d}=r;return(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"#f8fafc",borderRadius:"0.5rem"},children:[(0,t.jsx)("span",{style:{fontWeight:"500",color:"#1f2937"},children:i}),(0,t.jsx)("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:e.accent2},children:d})]},i)})})]}),r.mostCommonIssues.length>0&&(0,t.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,t.jsx)("h2",{style:{margin:"0 0 1rem 0",color:"#1f2937"},children:"المشاكل الشائعة"}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.mostCommonIssues.map((e,r)=>(0,t.jsx)("div",{style:{padding:"0.75rem",background:"#fef3c7",borderRadius:"0.5rem",borderLeft:"4px solid #f59e0b"},children:(0,t.jsx)("span",{style:{color:"#92400e"},children:e})},r))})]})]})]})]})}},2076:(e,r,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/analytics",function(){return i(149)}])}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(2076)),_N_E=e.O()}]);