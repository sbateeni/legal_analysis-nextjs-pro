(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{6670:(e,t,a)=>{"use strict";a.d(t,{Gm:()=>p,I7:()=>y,LF:()=>h,M8:()=>f,Pc:()=>o,WL:()=>l,W_:()=>c,mn:()=>m,qK:()=>u,ub:()=>x,x1:()=>s});var n=a(9703);let i="legal_cases",r="gemini_api_key",d="legal_templates";async function o(e){await (0,n.hZ)(r,e)}async function l(){return await (0,n.Jt)(r)||""}async function s(){return await (0,n.Jt)(i)||[]}async function c(e){await (0,n.hZ)(i,e)}async function u(e){let t=await s();t.unshift(e),await c(t)}async function p(e){let t=await s();t=t.map(t=>t.id===e.id?e:t),await c(t)}async function f(){await (0,n.yH)(i)}async function h(){return await (0,n.Jt)(d)||[]}async function g(e){await (0,n.hZ)(d,e)}async function m(e){let t=await h();t.unshift(e),await g(t)}async function x(e){let t=await h();t=t.map(t=>t.id===e.id?e:t),await g(t)}async function y(e){let t=await h();t=t.filter(t=>t.id!==e),await g(t)}},8908:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(7876),i=a(4232),r=a(9799),d=a(1965),o=a(6670),l=a(4553);function s(){let{theme:e}=(0,r.D)(),[t,a]=(0,i.useState)([]),[s,c]=(0,i.useState)("قالب جديد"),[u,p]=(0,i.useState)("عنوان: {{caseName}}\n\nملخص المراحل:\n{{stageSummaries}}"),[f,h]=(0,i.useState)(null),[g,m]=(0,i.useState)([]),[x,y]=(0,i.useState)("");(0,i.useEffect)(()=>{(0,o.LF)().then(a),(0,o.x1)().then(m)},[]);let w=async()=>{if(!s.trim()||!u.trim())return;let e=new Date().toISOString();if(f)await (0,o.ub)({id:f,name:s,content:u,createdAt:e,updatedAt:e}),a(await (0,o.LF)());else{let t={id:Math.random().toString(36).slice(2),name:s,content:u,createdAt:e,updatedAt:e};await (0,o.mn)(t),a(await (0,o.LF)())}h(null)},b=e=>{h(e.id),c(e.name),p(e.content)},j=async e=>{await (0,o.I7)(e),a(await (0,o.LF)())},v=e=>{let t=g.find(e=>e.id===x);if(!t)return e.content;let a=(t.stages||[]).map((e,t)=>"المرحلة ".concat(t+1,": ").concat(e.stage,"\n").concat(e.output)).join("\n\n");return e.content.replace(/{{caseName}}/g,t.name).replace(/{{stageSummaries}}/g,a)},k=async e=>{let t=v(e).split(/\n+/).map(e=>e.trim()).filter(Boolean).map(e=>new l.fzL({children:[new l.NTc({text:e})]})),a=new l.yoT({sections:[{children:[new l.fzL({text:e.name,heading:l.Fmo.HEADING_2}),...t]}]}),n=await l.ND6.toBlob(a),i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download="".concat(e.name,".docx"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)};return(0,n.jsx)("div",{style:{fontFamily:"Tajawal, Arial, sans-serif",direction:"rtl",minHeight:"100vh",background:e.background,color:e.text},children:(0,n.jsxs)("main",{style:{maxWidth:960,margin:"0 auto",padding:(0,d.Fr)()?"1rem 0.5rem":"2rem 1rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:16},children:[(0,n.jsx)("span",{style:{fontSize:(0,d.Fr)()?28:32},children:"\uD83E\uDDFE"}),(0,n.jsx)("h1",{style:{margin:0,color:e.accent},children:"قوالب المرافعات"})]}),(0,n.jsxs)("div",{style:{background:e.card,borderRadius:12,border:"1.5px solid ".concat(e.border),boxShadow:"0 2px 12px ".concat(e.shadow),padding:(0,d.Fr)()?12:18,marginBottom:16},children:[(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:(0,d.Fr)()?"1fr":"1fr 1fr",gap:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontWeight:700,color:e.accent2,marginBottom:6},children:"اسم القالب"}),(0,n.jsx)("input",{value:s,onChange:e=>c(e.target.value),style:{width:"100%",border:"1.5px solid ".concat(e.input),borderRadius:10,padding:10}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{display:"block",fontWeight:700,color:e.accent2,marginBottom:6},children:"اختر قضية للتعبئة"}),(0,n.jsxs)("select",{value:x,onChange:e=>y(e.target.value),style:{width:"100%",border:"1.5px solid ".concat(e.input),borderRadius:10,padding:10},children:[(0,n.jsx)("option",{value:"",children:"— بدون —"}),g.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,n.jsx)("label",{style:{display:"block",fontWeight:700,color:e.accent2,margin:"10px 0 6px"},children:"محتوى القالب"}),(0,n.jsx)("textarea",{value:u,onChange:e=>p(e.target.value),rows:(0,d.Fr)()?10:14,style:{width:"100%",border:"1.5px solid ".concat(e.input),borderRadius:10,padding:10,fontFamily:"Tajawal, Arial, sans-serif"}}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,flexWrap:"wrap",marginTop:10},children:[(0,n.jsx)("button",{onClick:w,style:{background:e.accent2,color:"#fff",border:"none",borderRadius:8,padding:"8px 14px",fontWeight:800},children:"حفظ القالب"}),(0,n.jsxs)("div",{style:{color:"#666",fontSize:13},children:["المتغيرات المتاحة: ","{{caseName}}",", ","{{stageSummaries}}"]})]})]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:(0,d.Fr)()?"1fr":"1fr 1fr",gap:12},children:t.map(t=>(0,n.jsxs)("div",{style:{background:e.card,borderRadius:12,border:"1.5px solid ".concat(e.border),boxShadow:"0 2px 12px ".concat(e.shadow),padding:12},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[(0,n.jsx)("div",{style:{fontWeight:800,color:e.accent},children:t.name}),(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsx)("button",{onClick:()=>b(t),style:{background:e.accent2,color:"#fff",border:"none",borderRadius:8,padding:"6px 10px",fontWeight:700},children:"تعديل"}),(0,n.jsx)("button",{onClick:()=>k(t),style:{background:"#0ea5e9",color:"#fff",border:"none",borderRadius:8,padding:"6px 10px",fontWeight:700},children:"تصدير Word"}),(0,n.jsx)("button",{onClick:()=>j(t.id),style:{background:"#ef4444",color:"#fff",border:"none",borderRadius:8,padding:"6px 10px",fontWeight:700},children:"حذف"})]})]}),(0,n.jsx)("div",{style:{whiteSpace:"pre-wrap",color:"#555",marginTop:8},children:v(t)})]},t.id))})]})})}},9024:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/templates",function(){return a(8908)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[741,220,636,593,792],()=>t(9024)),_N_E=e.O()}]);