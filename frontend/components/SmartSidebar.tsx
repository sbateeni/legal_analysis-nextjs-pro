import React, { useState, useEffect } from 'react';
import { useRouter } from 'next/router';
import { useTheme } from '../contexts/ThemeContext';
import Link from 'next/link';

interface SmartSidebarProps {
  isOpen: boolean;
  onClose: () => void;
}

interface NavigationItem {
  id: string;
  label: string;
  icon: string;
  href: string;
  category: string;
  description: string;
  isNew?: boolean;
  badge?: string;
}

export default function SmartSidebar({ isOpen, onClose }: SmartSidebarProps) {
  const { theme, darkMode, setDarkMode } = useTheme();
  const router = useRouter();
  const [searchQuery, setSearchQuery] = useState('');
  const [activeCategory, setActiveCategory] = useState<string>('all');
  const [recentItems, setRecentItems] = useState<string[]>([]);

  // ÿ™ÿπÿ±ŸäŸÅ ÿπŸÜÿßÿµÿ± ÿßŸÑÿ™ŸÜŸÇŸÑ ŸÖÿπ ÿßŸÑŸàÿµŸÅ
  const navigationItems: NavigationItem[] = [
    // ÿßŸÑÿµŸÅÿ≠ÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
    { 
      id: 'home', 
      label: 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©', 
      icon: 'üè†', 
      href: '/', 
      category: 'main',
      description: 'ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸÑŸÑŸÖŸÜÿµÿ©'
    },
    { 
      id: 'chat', 
      label: 'ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©', 
      icon: 'üí¨', 
      href: '/chat', 
      category: 'main',
      description: 'ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑŸÇÿßŸÜŸàŸÜŸä ÿßŸÑŸÖÿØÿπŸàŸÖ ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä',
      badge: 'AI'
    },
    { 
      id: 'rag', 
      label: 'ŸÜÿ∏ÿßŸÖ RAG', 
      icon: 'üèõÔ∏è', 
      href: '/rag', 
      category: 'main',
      description: 'ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ®ÿ≠ÿ´ ŸàÿßŸÑÿßÿ≥ÿ™ÿ±ÿ¨ÿßÿπ ÿßŸÑŸÖÿπÿ≤ÿ≤ ŸÑŸÑŸÇŸàÿßŸÜŸäŸÜ ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©'
    },
    { 
      id: 'advanced-search', 
      label: 'ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ', 
      icon: 'üîç', 
      href: '/advanced-search', 
      category: 'main',
      description: 'ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑŸÇÿßŸÜŸàŸÜŸä ÿßŸÑŸÖÿ™ŸÇÿØŸÖ ŸÖÿπ ŸÅŸÑÿßÿ™ÿ± ÿØŸÇŸäŸÇÿ©'
    },
    { 
      id: 'intelligent-stages', 
      label: 'ŸÖÿ±ÿßÿ≠ŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ∞ŸÉŸäÿ©', 
      icon: 'üß†', 
      href: '/intelligent-stages', 
      category: 'main',
      description: 'ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ∞ŸÉŸä ŸÑŸÑŸÇÿ∂ÿßŸäÿß ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ©'
    },
    { 
      id: 'legal-updates', 
      label: 'ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ©', 
      icon: 'üì∞', 
      href: '/legal-updates', 
      category: 'main',
      description: 'ÿ¢ÿÆÿ± ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ŸàÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ©'
    },
    { 
      id: 'inheritance', 
      label: 'ÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸÖŸàÿßÿ±Ÿäÿ´', 
      icon: 'üßÆ', 
      href: '/inheritance', 
      category: 'main',
      description: 'ÿ≠ÿßÿ≥ÿ®ÿ© ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑŸÖŸäÿ±ÿßÿ´ ÿ≠ÿ≥ÿ® ÿßŸÑÿ¥ÿ±Ÿäÿπÿ© ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ©'
    },
    { 
      id: 'analytics', 
      label: 'ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™', 
      icon: 'üìä', 
      href: '/analytics', 
      category: 'main',
      description: 'ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ÿ¥ÿßŸÖŸÑÿ© ŸÑŸÑŸÇÿ∂ÿßŸäÿß ŸàÿßŸÑÿ£ÿØÿßÿ°'
    },
    { 
      id: 'documents', 
      label: 'ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™', 
      icon: 'üìÅ', 
      href: '/documents', 
      category: 'main',
      description: 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸàÿßŸÑŸÖŸÑŸÅÿßÿ™ ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ©'
    },
    { 
      id: 'cases', 
      label: 'ÿßŸÑŸÇÿ∂ÿßŸäÿß', 
      icon: 'üìã', 
      href: '/cases', 
      category: 'main',
      description: 'ÿ•ÿØÿßÿ±ÿ© ÿ¥ÿßŸÖŸÑÿ© ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑŸÇÿ∂ÿßŸäÿß ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ©'
    },
    { 
      id: 'calendar', 
      label: 'ÿßŸÑÿ™ŸÇŸàŸäŸÖ', 
      icon: 'üìÖ', 
      href: '/calendar', 
      category: 'main',
      description: 'ÿ™ŸÇŸàŸäŸÖ ÿßŸÑŸÖŸàÿßÿπŸäÿØ ŸàÿßŸÑÿ¨ŸÑÿ≥ÿßÿ™'
    },
    { 
      id: 'collaboration', 
      label: 'ÿßŸÑÿ™ÿπÿßŸàŸÜ', 
      icon: 'ü§ù', 
      href: '/collaboration', 
      category: 'main',
      description: 'ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿπÿßŸàŸÜ ŸàÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© ŸÖÿπ ÿßŸÑŸÅÿ±ŸäŸÇ'
    },
    { 
      id: 'templates', 
      label: 'ÿßŸÑŸÇŸàÿßŸÑÿ®', 
      icon: 'üìù', 
      href: '/templates', 
      category: 'main',
      description: 'ŸÇŸàÿßŸÑÿ® ÿßŸÑŸÖÿ±ÿßŸÅÿπÿßÿ™ ŸàÿßŸÑŸÖÿ∞ŸÉÿ±ÿßÿ™ ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ©'
    },
    { 
      id: 'exports', 
      label: 'ÿßŸÑÿ™ÿµÿØŸäÿ±', 
      icon: '‚¨áÔ∏è', 
      href: '/exports', 
      category: 'main',
      description: 'ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™'
    },
    { 
      id: 'history', 
      label: 'ÿßŸÑÿ≥ÿ¨ŸÑ', 
      icon: 'üìë', 
      href: '/history', 
      category: 'main',
      description: 'ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÇÿ∂ÿßŸäÿß ŸàÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ©'
    },
    { 
      id: 'reference-checker', 
      label: 'ŸÅÿ≠ÿµ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπ', 
      icon: 'üîç', 
      href: '/reference-checker', 
      category: 'main',
      description: 'ŸÅÿ≠ÿµ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπ ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ©'
    },
    { 
      id: 'kb', 
      label: 'ŸÇÿßÿπÿØÿ© ÿßŸÑŸÖÿπÿ±ŸÅÿ©', 
      icon: 'üìö', 
      href: '/kb', 
      category: 'main',
      description: 'ŸÇÿßÿπÿØÿ© ÿßŸÑŸÖÿπÿ±ŸÅÿ© ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ© ÿßŸÑŸÅŸÑÿ≥ÿ∑ŸäŸÜŸäÿ©'
    },
    { 
      id: 'resources', 
      label: 'ÿßŸÑŸÖŸàÿßÿ±ÿØ', 
      icon: 'üì¶', 
      href: '/resources', 
      category: 'main',
      description: 'ÿßŸÑŸÖŸàÿßÿ±ÿØ ŸàÿßŸÑÿ£ÿØŸàÿßÿ™ ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ©'
    },
    { 
      id: 'about', 
      label: 'ÿ™ÿπŸÑŸäŸÖÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ', 
      icon: '‚ùì', 
      href: '/about', 
      category: 'main',
      description: 'ÿØŸÑŸäŸÑ ÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸàÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©'
    },
    { 
      id: 'privacy', 
      label: 'ÿßŸÑÿÆÿµŸàÿµŸäÿ©', 
      icon: 'üîí', 
      href: '/privacy', 
      category: 'main',
      description: 'ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ© Ÿàÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™'
    },
    { 
      id: 'offline', 
      label: 'Ÿàÿ∂ÿπ ÿπÿØŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ', 
      icon: 'üì±', 
      href: '/offline', 
      category: 'main',
      description: 'ÿßŸÑÿπŸÖŸÑ ÿ®ÿØŸàŸÜ ÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™'
    },
    { 
      id: 'navigation-demo', 
      label: 'ÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑÿ™ŸÜŸÇŸÑ', 
      icon: 'üß≠', 
      href: '/navigation-demo', 
      category: 'main',
      description: 'ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑÿ™ŸÜŸÇŸÑ ÿßŸÑÿ¨ÿØŸäÿØÿ©'
    },
    { 
      id: 'settings', 
      label: 'ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™', 
      icon: '‚öôÔ∏è', 
      href: '/settings', 
      category: 'main',
      description: 'ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖŸÜÿµÿ© ŸàÿßŸÑÿ™ÿÆÿµŸäÿµ'
    },
  ];

  // ÿ™ÿµŸÜŸäŸÅ ÿßŸÑÿπŸÜÿßÿµÿ±
  const categorizedItems = navigationItems.reduce((acc, item) => {
    if (!acc[item.category]) {
      acc[item.category] = [];
    }
    acc[item.category].push(item);
    return acc;
  }, {} as Record<string, NavigationItem[]>);

  // ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑŸÖŸÅŸÑÿ™ÿ±
  const filteredItems = navigationItems.filter(item =>
    item.label.toLowerCase().includes(searchQuery.toLowerCase()) ||
    item.description.toLowerCase().includes(searchQuery.toLowerCase()) ||
    item.icon.includes(searchQuery)
  );

  // ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ÿ©
  const displayItems = searchQuery ? filteredItems : 
    (activeCategory === 'all' ? navigationItems : categorizedItems[activeCategory] || []);

  // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿ£ÿÆŸäÿ±ÿ©
  useEffect(() => {
    const savedRecent = localStorage.getItem('recentNavigationItems');
    if (savedRecent) {
      setRecentItems(JSON.parse(savedRecent));
    }
  }, []);

  // ÿ≠ŸÅÿ∏ ÿßŸÑÿπŸÜÿµÿ± ŸÉÿ£ÿÆŸäÿ±
  const addToRecent = (itemId: string) => {
    const newRecent = [itemId, ...recentItems.filter(id => id !== itemId)].slice(0, 5);
    setRecentItems(newRecent);
    localStorage.setItem('recentNavigationItems', JSON.stringify(newRecent));
  };

  // ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿ£ÿÆŸäÿ±ÿ©
  const recentItemsList = navigationItems.filter(item => recentItems.includes(item.id));

  const getCategoryLabel = (category: string) => {
    switch (category) {
      case 'main': return 'ÿßŸÑÿµŸÅÿ≠ÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©';
      case 'management': return 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÇÿ∂ÿßŸäÿß';
      case 'tools': return 'ÿßŸÑÿ£ÿØŸàÿßÿ™';
      case 'settings': return 'ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™';
      default: return 'ÿßŸÑŸÉŸÑ';
    }
  };

  const getCategoryIcon = (category: string) => {
    switch (category) {
      case 'main': return '‚≠ê';
      case 'management': return 'üìä';
      case 'tools': return 'üîß';
      case 'settings': return '‚öôÔ∏è';
      default: return 'üìÅ';
    }
  };

  // ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ¨ÿßŸÜÿ®Ÿä ÿπŸÜÿØ ÿßŸÑŸÜŸÇÿ± ÿÆÿßÿ±ÿ¨Ÿá
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      const target = event.target as HTMLElement;
      if (!target.closest('.smart-sidebar') && isOpen) {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('click', handleClickOutside);
    }

    return () => {
      document.removeEventListener('click', handleClickOutside);
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  return (
    <div className="smart-sidebar" style={{
      position: 'fixed',
      top: 0,
      left: 0,
      bottom: 0,
      width: '320px',
      background: theme.card,
      borderRight: `1px solid ${theme.border}`,
      boxShadow: `4px 0 20px ${theme.shadow}`,
      zIndex: 1000,
      display: 'flex',
      flexDirection: 'column',
      animation: 'slideInLeft 0.3s ease'
    }}>
      {/* Header */}
      <div style={{
        padding: '20px',
        borderBottom: `1px solid ${theme.border}`
      }}>
        <div style={{
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center',
          marginBottom: '16px'
        }}>
          <h2 style={{
            color: theme.text,
            margin: '0',
            fontSize: '18px',
            fontWeight: 'bold'
          }}>
            ‚öñÔ∏è ÿßŸÑÿ™ŸÜŸÇŸÑ ÿßŸÑÿ∞ŸÉŸä
          </h2>
          <div style={{
            display: 'flex',
            alignItems: 'center',
            gap: '8px'
          }}>
            {/* Theme Toggle Button */}
            <button
              onClick={() => setDarkMode(!darkMode)}
              style={{
                background: 'transparent',
                border: 'none',
                color: theme.text,
                fontSize: '18px',
                cursor: 'pointer',
                padding: '4px',
                borderRadius: '4px',
                transition: 'all 0.2s ease'
              }}
              title={darkMode ? 'ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ŸÑŸÑŸàÿ∂ÿπ ÿßŸÑŸÜŸáÿßÿ±Ÿä' : 'ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ŸÑŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä'}
            >
              {darkMode ? '‚òÄÔ∏è' : 'üåô'}
            </button>
            <button
              onClick={onClose}
              style={{
                background: 'transparent',
                border: 'none',
                color: theme.text,
                fontSize: '20px',
                cursor: 'pointer',
                padding: '4px'
              }}
            >
              ‚úï
            </button>
          </div>
        </div>

        {/* Search */}
        <div style={{
          position: 'relative'
        }}>
          <input
            type="text"
            placeholder="ÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿßÿ™..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            style={{
              width: '100%',
              padding: '12px 12px 12px 40px',
              borderRadius: '8px',
              border: `1px solid ${theme.border}`,
              background: theme.background,
              color: theme.text,
              fontSize: '14px',
              outline: 'none'
            }}
          />
          <span style={{
            position: 'absolute',
            left: '12px',
            top: '50%',
            transform: 'translateY(-50%)',
            color: theme.text,
            opacity: 0.7
          }}>
            üîç
          </span>
        </div>
      </div>

      {/* Categories */}
      {!searchQuery && (
        <div style={{
          padding: '16px 20px',
          borderBottom: `1px solid ${theme.border}`
        }}>
          <div style={{
            display: 'flex',
            gap: '8px',
            overflowX: 'auto',
            paddingBottom: '4px'
          }}>
            <button
              onClick={() => setActiveCategory('all')}
              style={{
                padding: '8px 12px',
                borderRadius: '16px',
                border: 'none',
                background: activeCategory === 'all' ? theme.accent : theme.resultBg,
                color: activeCategory === 'all' ? '#fff' : theme.text,
                fontSize: '12px',
                cursor: 'pointer',
                fontWeight: 'bold',
                whiteSpace: 'nowrap'
              }}
            >
              üìÅ ÿßŸÑŸÉŸÑ
            </button>
            {Object.keys(categorizedItems).map((category) => (
              <button
                key={category}
                onClick={() => setActiveCategory(category)}
                style={{
                  padding: '8px 12px',
                  borderRadius: '16px',
                  border: 'none',
                  background: activeCategory === category ? theme.accent : theme.resultBg,
                  color: activeCategory === category ? '#fff' : theme.text,
                  fontSize: '12px',
                  cursor: 'pointer',
                  fontWeight: 'bold',
                  whiteSpace: 'nowrap'
                }}
              >
                {getCategoryIcon(category)} {getCategoryLabel(category)}
              </button>
            ))}
          </div>
        </div>
      )}

      {/* Recent Items */}
      {!searchQuery && recentItemsList.length > 0 && activeCategory === 'all' && (
        <div style={{
          padding: '16px 20px',
          borderBottom: `1px solid ${theme.border}`
        }}>
          <h3 style={{
            color: theme.text,
            margin: '0 0 12px 0',
            fontSize: '14px',
            fontWeight: 'bold'
          }}>
            üïí ÿßŸÑÿ£ÿÆŸäÿ±ÿ©
          </h3>
          <div style={{
            display: 'flex',
            flexDirection: 'column',
            gap: '8px'
          }}>
            {recentItemsList.map((item) => (
              <Link key={item.id} href={item.href} style={{ textDecoration: 'none' }}>
                <div
                  onClick={() => addToRecent(item.id)}
                  style={{
                    padding: '8px 12px',
                    borderRadius: '8px',
                    background: router.pathname === item.href ? theme.accent : theme.resultBg,
                    color: router.pathname === item.href ? '#fff' : theme.text,
                    cursor: 'pointer',
                    transition: 'all 0.2s ease',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px'
                  }}
                  onMouseEnter={(e) => {
                    if (router.pathname !== item.href) {
                      e.currentTarget.style.background = theme.accent2;
                    }
                  }}
                  onMouseLeave={(e) => {
                    if (router.pathname !== item.href) {
                      e.currentTarget.style.background = theme.resultBg;
                    }
                  }}
                >
                  <span style={{ fontSize: '16px' }}>{item.icon}</span>
                  <span style={{ fontSize: '12px', fontWeight: 'bold' }}>{item.label}</span>
                </div>
              </Link>
            ))}
          </div>
        </div>
      )}

      {/* Navigation Items */}
      <div style={{
        flex: 1,
        overflow: 'auto',
        padding: '16px 20px'
      }}>
        {searchQuery && (
          <div style={{
            marginBottom: '16px',
            paddingBottom: '16px',
            borderBottom: `1px solid ${theme.border}`
          }}>
            <h3 style={{
              color: theme.text,
              margin: '0 0 12px 0',
              fontSize: '14px',
              fontWeight: 'bold'
            }}>
              üîç ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ®ÿ≠ÿ´ ({filteredItems.length})
            </h3>
          </div>
        )}

        <div style={{
          display: 'flex',
          flexDirection: 'column',
          gap: '8px'
        }}>
          {displayItems.map((item) => (
            <Link key={item.id} href={item.href} style={{ textDecoration: 'none' }}>
              <div
                onClick={() => {
                  addToRecent(item.id);
                  onClose();
                }}
                style={{
                  padding: '12px',
                  borderRadius: '8px',
                  background: router.pathname === item.href ? theme.accent : theme.resultBg,
                  color: router.pathname === item.href ? '#fff' : theme.text,
                  cursor: 'pointer',
                  transition: 'all 0.2s ease',
                  border: `1px solid ${router.pathname === item.href ? theme.accent : 'transparent'}`,
                  position: 'relative'
                }}
                onMouseEnter={(e) => {
                  if (router.pathname !== item.href) {
                    e.currentTarget.style.background = theme.accent2;
                    e.currentTarget.style.transform = 'translateX(4px)';
                  }
                }}
                onMouseLeave={(e) => {
                  if (router.pathname !== item.href) {
                    e.currentTarget.style.background = theme.resultBg;
                    e.currentTarget.style.transform = 'translateX(0)';
                  }
                }}
              >
                <div style={{
                  display: 'flex',
                  alignItems: 'center',
                  gap: '12px',
                  marginBottom: '4px'
                }}>
                  <span style={{ fontSize: '18px' }}>{item.icon}</span>
                  <span style={{ fontSize: '14px', fontWeight: 'bold', flex: 1 }}>
                    {item.label}
                  </span>
                  {item.badge && (
                    <span style={{
                      padding: '2px 6px',
                      borderRadius: '8px',
                      background: '#10b981',
                      color: '#fff',
                      fontSize: '8px',
                      fontWeight: 'bold'
                    }}>
                      {item.badge}
                    </span>
                  )}
                  {item.isNew && (
                    <span style={{
                      padding: '2px 6px',
                      borderRadius: '8px',
                      background: '#ef4444',
                      color: '#fff',
                      fontSize: '8px',
                      fontWeight: 'bold'
                    }}>
                      ÿ¨ÿØŸäÿØ
                    </span>
                  )}
                </div>
                <p style={{
                  margin: '0',
                  fontSize: '12px',
                  opacity: 0.8,
                  lineHeight: '1.4'
                }}>
                  {item.description}
                </p>
              </div>
            </Link>
          ))}
        </div>
      </div>

      {/* Footer */}
      <div style={{
        padding: '16px 20px',
        borderTop: `1px solid ${theme.border}`,
        background: theme.background
      }}>
        <div style={{
          display: 'flex',
          gap: '8px'
        }}>
          <button style={{
            flex: 1,
            padding: '8px',
            borderRadius: '6px',
            border: 'none',
            background: theme.accent2,
            color: '#fff',
            fontSize: '10px',
            cursor: 'pointer',
            fontWeight: 'bold'
          }}>
            üöÄ ÿ•ÿ¨ÿ±ÿßÿ° ÿ≥ÿ±Ÿäÿπ
          </button>
          <button style={{
            flex: 1,
            padding: '8px',
            borderRadius: '6px',
            border: 'none',
            background: theme.accent2,
            color: '#fff',
            fontSize: '10px',
            cursor: 'pointer',
            fontWeight: 'bold'
          }}>
            üìä ÿ™ŸÇÿ±Ÿäÿ±
          </button>
        </div>
      </div>

      <style>{`
        @keyframes slideInLeft {
          from {
            transform: translateX(-100%);
          }
          to {
            transform: translateX(0);
          }
        }
      `}</style>
    </div>
  );
}
